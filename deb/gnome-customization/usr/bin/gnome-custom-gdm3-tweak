#!/bin/bash
sudo true

if [ "$#" == "8" ] || [ "$#" == "9" ]
then
	sudo -u gdm dbus-launch gsettings set org.gnome.desktop.interface show-battery-percentage $1 2> /dev/null
	sudo -u gdm dbus-launch gsettings set org.gnome.desktop.interface clock-show-weekday $2 2> /dev/null
	sudo -u gdm dbus-launch gsettings set org.gnome.desktop.interface clock-show-date $3 2> /dev/null
	sudo -u gdm dbus-launch gsettings set org.gnome.desktop.interface clock-show-seconds $4 2> /dev/null
	sudo -u gdm dbus-launch gsettings set org.gnome.desktop.calendar show-weekdate $5 2> /dev/null
	sudo -u gdm dbus-launch gsettings set org.gnome.desktop.interface gtk-theme \'$6\' 2> /dev/null
	sudo -u gdm dbus-launch gsettings set org.gnome.desktop.interface icon-theme \'$7\' 2> /dev/null
	sudo -u gdm dbus-launch gsettings set org.gnome.desktop.interface cursor-theme \'$8\' 2> /dev/null
	sudo -u gdm dbus-launch gsettings set org.gnome.login-screen logo \'$9\' 2> /dev/null
	echo
	echo
	while true
	do
		read -p "Restart GDM3? [Y/n] " yn
		case $yn in
			[Yy]* ) sudo systemctl restart gdm3.service; break;;
			[Nn]* ) break;;
		esac
	done
else
	echo "Usage: gnome-custom-gdm3-tweak <battery %?> <weekday?> <date?> <seconds?> <week nÂ°?> <GTK theme> <icons> <cursors> [watermark]"
	echo " ('<...?>' should be 'true' or 'false' and [watermark] should be a path to an image, or nothing to remove the watermark)"
	echo
	echo "Syntaxt error!"
fi
